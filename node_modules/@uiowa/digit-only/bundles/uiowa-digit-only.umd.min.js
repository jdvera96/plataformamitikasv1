!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("@uiowa/digit-only",["exports","@angular/core"],t):t(((e=e||self).uiowa=e.uiowa||{},e.uiowa["digit-only"]={}),e.ng.core)}(this,(function(e,t){"use strict";var i=function(){function e(e){this.el=e,this.hasDecimalPoint=!1,this.navigationKeys=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"],this.decimal=!1,this.decimalSeparator=".",this.min=-1/0,this.max=1/0,this.inputElement=e.nativeElement}return e.prototype.ngOnChanges=function(e){if(e.pattern&&(this.regex=this.pattern?RegExp(this.pattern):null),e.min){var t=Number(this.min);this.min=isNaN(t)?-1/0:t}if(e.max){var i=Number(this.max);this.max=isNaN(i)?1/0:i}},e.prototype.onKeyDown=function(e){if(!(this.navigationKeys.indexOf(e.key)>-1||"a"===e.key&&!0===e.ctrlKey||"c"===e.key&&!0===e.ctrlKey||"v"===e.key&&!0===e.ctrlKey||"x"===e.key&&!0===e.ctrlKey||"a"===e.key&&!0===e.metaKey||"c"===e.key&&!0===e.metaKey||"v"===e.key&&!0===e.metaKey||"x"===e.key&&!0===e.metaKey)){var t="";if(this.decimal&&e.key===this.decimalSeparator)return(t=this.forecastValue(e.key)).split(this.decimalSeparator).length>2?void e.preventDefault():void(this.hasDecimalPoint=t.indexOf(this.decimalSeparator)>-1);if(" "===e.key||isNaN(Number(e.key)))e.preventDefault();else if(t=t||this.forecastValue(e.key),!this.regex||this.regex.test(t)){var i=Number(t);(i>this.max||i<this.min)&&e.preventDefault()}else e.preventDefault()}},e.prototype.onPaste=function(e){var t;window.clipboardData?t=window.clipboardData.getData("text"):e.clipboardData&&e.clipboardData.getData&&(t=e.clipboardData.getData("text/plain")),this.pasteData(t),e.preventDefault()},e.prototype.onDrop=function(e){var t=e.dataTransfer.getData("text");this.inputElement.focus(),this.pasteData(t),e.preventDefault()},e.prototype.pasteData=function(e){var t=this.sanitizeInput(e);if(!document.execCommand("insertText",!1,t))if(this.inputElement.setRangeText){var i=this.inputElement,n=i.selectionStart,a=i.selectionEnd;this.inputElement.setRangeText(t,n,a,"end")}else this.insertAtCursor(this.inputElement,t);this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator)>-1)},e.prototype.insertAtCursor=function(e,t){var i=e.selectionStart,n=e.selectionEnd;e.value=e.value.substring(0,i)+t+e.value.substring(n,e.value.length);var a=i+t.length;e.focus(),e.setSelectionRange(a,a),this.triggerEvent(e,"input")},e.prototype.triggerEvent=function(e,t){if("createEvent"in document){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)}},e.prototype.sanitizeInput=function(e){var t="";if(this.decimal&&this.isValidDecimal(e)){var i=new RegExp("[^0-9"+this.decimalSeparator+"]","g");t=e.replace(i,"")}else t=e.replace(/[^0-9]/g,"");var n=this.inputElement.maxLength;if(n>0){var a=n-this.inputElement.value.length;t=a>0?t.substring(0,a):""}return t},e.prototype.isValidDecimal=function(e){if(this.hasDecimalPoint){var t=this.getSelection();return t&&t.indexOf(this.decimalSeparator)>-1?e.split(this.decimalSeparator).length<=2:e.indexOf(this.decimalSeparator)<0}return e.split(this.decimalSeparator).length<=2},e.prototype.getSelection=function(){return this.inputElement.value.substring(this.inputElement.selectionStart,this.inputElement.selectionEnd)},e.prototype.forecastValue=function(e){var t=this.inputElement.selectionStart,i=this.inputElement.selectionEnd,n=this.inputElement.value,a=n.substring(t,i);return a?n.replace(a,e):n.substring(0,t)+e+n.substring(t)},e}();i.decorators=[{type:t.Directive,args:[{selector:"[digitOnly]"}]}],i.ctorParameters=function(){return[{type:t.ElementRef}]},i.propDecorators={decimal:[{type:t.Input}],decimalSeparator:[{type:t.Input}],min:[{type:t.Input}],max:[{type:t.Input}],pattern:[{type:t.Input}],onKeyDown:[{type:t.HostListener,args:["keydown",["$event"]]}],onPaste:[{type:t.HostListener,args:["paste",["$event"]]}],onDrop:[{type:t.HostListener,args:["drop",["$event"]]}]};var n=function(){function e(e){this.el=e,this.navigationKeys=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"],this.inputElement=e.nativeElement,this.regex=new RegExp(this.inputElement.pattern)}return e.prototype.onKeyDown=function(e){if(!(this.navigationKeys.indexOf(e.key)>-1||"a"===e.key&&!0===e.ctrlKey||"c"===e.key&&!0===e.ctrlKey||"v"===e.key&&!0===e.ctrlKey||"x"===e.key&&!0===e.ctrlKey||"a"===e.key&&!0===e.metaKey||"c"===e.key&&!0===e.metaKey||"v"===e.key&&!0===e.metaKey||"x"===e.key&&!0===e.metaKey)){var t=this.forecastValue(e.key);this.regex.test(t)||e.preventDefault()}},e.prototype.forecastValue=function(e){var t=this.inputElement.selectionStart,i=this.inputElement.selectionEnd,n=this.inputElement.value,a=n.substring(t,i);return a?n.replace(a,e):n.substring(0,t)+e+n.substring(t)},e}();n.decorators=[{type:t.Directive,args:[{selector:"[mask]"}]}],n.ctorParameters=function(){return[{type:t.ElementRef}]},n.propDecorators={onKeyDown:[{type:t.HostListener,args:["keydown",["$event"]]}]};var a=function(){};a.decorators=[{type:t.NgModule,args:[{imports:[],declarations:[i,n],exports:[i,n]}]}],e.DigitOnlyDirective=i,e.DigitOnlyModule=a,e.MaskDirective=n,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=uiowa-digit-only.umd.min.js.map